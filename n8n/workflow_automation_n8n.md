# What is N8N and why use it?

N8N is an open-source workflow automation tool that can be installed and run locally. You have full control over your data, and it comes with a lot of integrations with other applications out of the box.

You can do a lot of stuff with N8N, and it can help you automate flows that would otherwise require a lot of your time. 

At the moment I've created 4 workflows in N8N that I am a bit proud of, and will present in separate posts. 



# My first N8N workflow: A story Creator to Discord
I wanted to create stories on the fly with what ever strange combination went through my head. And it was tedious work to speak with Chat GPT, and then tell him to generate chapter by chapter. I also wanted to see if I can do something decent locally. It's not perfect, it has some flaws, but my baby works :D 

The flow starts with a Chat Trigger Node, that receives the characteristics of the story: the plot, how many chapters and how many words per chapter. Then that input goes to a Basic LLM Chain node, that generates the story chapter, an overview, and the chapter names and chapter overviews. It is connected to an Ollama Model (I used a qwen2.5:7b-instruct-q4_K_M model) and gave the LLM Chain node a Structured Output Parser to put the information in a specific JSON. From there I connected to Discord, sent a message with the title and the plot, then the array of chapters entered a "Split out" node, that gave me control over the nodes. Next I loop over the items in the array using a Loop node, 1 by 1, post the chapter name to Discord, and provide another Basic LLM Chain node with a prompt to generate the story for chapter with name and plot. Initially the output was directly connected to Discord for output, however, a message on Discord has a 2.000 characters limit. To overcome this, I added some custom javascript code, that splits the story in multiple paragraphs, and then combines the paragraphs into chunks of maximum length of 2.000 characters. Each chunk gets sent to Discord. 

And stories get born :D 

You can find my N8N flow here: https://github.com/gctanita/understandingImageGeneration/blob/master/n8n/Story%20creator%20to%20Discord.json 


# A discord Bot... That roasts you
Why a roaster bot? For the love of chaos and laughs of course. The most complicated part? Getting the credentials from discord to create the bot. 

So... After managing to finally set up the credentials for the bot, and adding it to my server, it was quite strait forward from there: a Schedule Trigger node, to run every 30 seconds the workflow, then a Discord node to Get the channel, a Discord node to Get the last message. An If node to check that the last message was not sent by Roaster, our bot, and the witty reply to the message generated by a Basic LLM Chain connected to an Ollama Chat Model (qwen2.5:7b-instruct-q4_K_M model). The answer of course, sent to a Discord node. 

For more vicous roasting, there are some unhinged models out there that can go the extra mile with the roasting (like this guy that tweaks models to be amoral => https://huggingface.co/TheDrummer )

If you want to have your own fun with it, you can find the N8N flow here: https://github.com/gctanita/understandingImageGeneration/blob/master/n8n/Roaster.json


# Generating images... for science... 
I discovered ComfyUi, and wanted to understand what the parameters do. Ok the theory is nice and all... however to know and to actually see, 2 different things. However generating pictures with various parameters takes a lot of time. So I thought to my self, ok, can I automate this? 

Short answer: yes! there is a N8N integration with ComfyUi. So after obtaining credentials to google drive, I've put my plan into motion: a "Trigger manually" node to trigger the workflow, a Google Sheets - get rows in sheet node, a loop over items to feed 1 by 1 info to Discord Node and ComfyUI node. Then a Discord node that displays the picture and another one that puts some lines as a separator. 

There! Job done!

If you want to try it, you can find the N8N flow here: https://github.com/gctanita/understandingImageGeneration/blob/master/n8n/Comfy%20UI%20flows.json


# Making life easier...
So I have been posting images and comparing them to see how different values affect picture generation. Cool... However... It takes a lot of time to take them by hand put them into a Google Slides, resize, arrange, note down stuff. 

Just as I was about to go into a wondwerful 36 hour job to generate pictures, I thought to myself: is there any way to do that step easier? Of course the answer is yes, otherwise I wouldn't be writing this, right?! :D So, I solved this by creating a spreadsheet, that contains the info of the pictures (like the names, the seed, the name) and a N8N workflow around it.

A "manual trigger" node, that triggers the Google Sheets-get rows in sheet node, a loop over items node, a code node that converts the names of the pictures to the correct name format, and some other info from the sheet, that gets passed down to a HTML template node, that feeds a convert to file node that finally gets uploaded to google drive using an upload file node. 

Simple and elegant... And now I can dedicate my time and energy at looking at the pictures and analyzing them, instead of wasting time arrainging the pictures manually.

If you want to try it, you can find the N8N flow here: https://github.com/gctanita/understandingImageGeneration/blob/master/n8n/Comfy%20UI%20flows.json
